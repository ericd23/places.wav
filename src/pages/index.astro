---
import Layout from '../layouts/Layout.astro';
import CollectionGrid from '../components/CollectionGrid.astro';
import { getCollection } from 'astro:content';

// Get latest content
const mixes = await getCollection('mixes');
mixes.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
const latestMixes = mixes.slice(0, 4);

const conversations = await getCollection('conversations');
conversations.sort((a, b) => b.data.number - a.data.number);
const latestConversations = conversations.slice(0, 4);

---

<Layout title="Places" variant="wide">
    <div class="mb-8">
      <h1 class="text-2xl mb-4">Places</h1>
      <p class="text-gray-700 mb-8">
        Hamilton DJ collective. Democratizing DJ practices and music education.
      </p>
    </div>

    <div class="space-y-12">
      <section>
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-lg">Latest Mixes</h2>
          <a href="/mixes" class="text-xs border border-gray-400 px-3 py-1 hover:bg-gray-100">Show All</a>
        </div>
        <CollectionGrid items={latestMixes} collection="mixes" />
      </section>

      <section>
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-lg">Latest Conversations</h2>
          <a href="/convo" class="text-xs border border-gray-400 px-3 py-1 hover:bg-gray-100">Show All</a>
        </div>
        <CollectionGrid items={latestConversations} collection="conversations" />
      </section>

    </div>

</Layout>
