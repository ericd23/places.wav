---
import Layout from '../layouts/Layout.astro';
import CollectionGrid from '../components/CollectionGrid.astro';
import { getCollection } from 'astro:content';

// Get latest content
const mixes = await getCollection('mixes');
mixes.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
const latestMixes = mixes.slice(0, 5);

const conversations = await getCollection('conversations');
conversations.sort((a, b) => b.data.number - a.data.number);
const latestConversations = conversations.slice(0, 5);

const archives = await getCollection('archive');
archives.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
const latestArchives = archives.slice(0, 5);
---

<Layout title="Places" variant="wide">
    <div class="mb-8">
      <h1 class="text-2xl mb-4">Places</h1>
      <p class="text-gray-700 mb-8">
        Hamilton DJ collective. Democratizing DJ practices and music education.
      </p>
    </div>

    <div class="space-y-12">
      <section>
        <h2 class="text-lg mb-4">Latest Mixes</h2>
        <CollectionGrid items={latestMixes} collection="mixes" />
        <p class="text-xs text-gray-500 mt-4">
          <a href="/mixes" class="hover:text-black">All mixes →</a>
        </p>
      </section>

      <section>
        <h2 class="text-lg mb-4">Latest Conversations</h2>
        <CollectionGrid items={latestConversations} collection="conversations" />
        <p class="text-xs text-gray-500 mt-4">
          <a href="/convo" class="hover:text-black">All conversations →</a>
        </p>
      </section>

      <section>
        <h2 class="text-lg mb-4">Recent Archive</h2>
        <CollectionGrid items={latestArchives} collection="archive" />
        <p class="text-xs text-gray-500 mt-4">
          <a href="/archive" class="hover:text-black">All archive →</a>
        </p>
      </section>
    </div>

</Layout>
